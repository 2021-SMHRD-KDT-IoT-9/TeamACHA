<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smhrd.db.MemberMap">

	<insert id="join" parameterType="WebMember">
	<!-- 실제 타입 경로는 com.smhrd.model.WebMember 이지만 config.xml에서 별칭을 지정함 -->
		insert into web_member values(#{email},#{pw},#{tel},#{address})
		<!-- WebMember의 필드명을 적어야함 -->
	</insert>

	<select id="login" parameterType="WebMember"
		resultType="com.smhrd.model.WebMember">
		<!-- 로그인할때는 넘겨받는 값이 있어야 하므로 result타입을 받아와야함 -->
		select * from web_member where email=#{email} and pw=#{pw}
	</select>
	
	<update id="update" parameterType="WebMember">
		update web_member set pw=#{pw}, tel=#{tel}, address=#{address} where email=#{email}
	</update>
	
	<select id="select" resultType="WebMember">
	<!-- 2개 이상의 데이터를 반환할 때에는 기본으로 List로 반환하기 때문에 -->
	<!-- resultType에 작성하는 값은 List 안에 들어가느 ㄴ객체의 타입을 지정해야함! -->
		select * from web_member
	</select>
	
	<delete id="delete" parameterType="String">
		delete from web_member where email=#{email}
		<!-- 어차피 자리가 하나여서 #{}사이에 아무거나 들어와도 됨 -->
	</delete>
	
	<select id="emailCheck" parameterType="String"
		resultType="boolean">
		select case when count(*)>0 then 1
					else 0
			   end result	
		from web_member where email=#{input}
	</select>
	
	<select id="emailCheck2" parameterType="String" resultType="com.smhrd.model.WebMember">
		select * from web_member where email=#{input}
	</select>

</mapper>